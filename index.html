<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Generate consistent campaign asset names from a documented naming convention." />
  <meta name="color-scheme" content="dark light" />
  <meta name="theme-color" content="#0b0e13" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#eef1f7" media="(prefers-color-scheme: light)">
  <title>Campaign Name Generator</title>
  <style>
    /* ===== THEME ===== */
    :root{
      --bg:#0b0e13; --bg2:#101522; --card:#141923; --muted:#8a93a6; --text:#e6e9ef; --outline:#222837; --accent:#6ea8fe; --accent2:#9b7bff; --success:#7ef29a;
      --codeBg:#0c111b; --codeText:#cfe3ff;
      --radius:14px; --gap:14px;
      --shadow:0 10px 30px rgba(0,0,0,.10);
      --focus: 2px solid var(--accent);
    }
    [data-theme="light"]{
      --bg:#eef1f7; --bg2:#f6f7fb; --card:#ffffff; --muted:#5b647a; --text:#0f1222; --outline:#d6dbe8; --accent:#3b82f6; --accent2:#8b5cf6; --success:#10b981;
      --codeBg:#0f172a; --codeText:#e5edff;
    }

    /* ===== LAYOUT ===== */
    *{box-sizing:border-box}
    html,body{height:100%}
    html{overflow-y:scroll}
    body{margin:0;background:radial-gradient(1200px 600px at 10% -10%, var(--bg2) 0%, var(--bg) 45%, var(--bg) 100%);color:var(--text);font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;transition:background .3s ease,color .3s ease}
    a.skip{position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden}
    a.skip:focus{left:16px;top:16px;width:auto;height:auto;background:var(--card);color:var(--text);padding:8px 12px;border-radius:10px;border:1px solid var(--outline);box-shadow:var(--shadow)}

    header{position:sticky;top:0;backdrop-filter:saturate(150%) blur(6px);background:linear-gradient(180deg, color-mix(in oklab,var(--bg) 92%, transparent), transparent);z-index:10;max-width:1160px;margin:0 auto;padding:12px 20px;display:flex;align-items:center;justify-content:space-between;gap:12px;border-bottom:1px solid var(--outline)}
    h1{margin:0 0 6px;font-size:32px;font-weight:800;letter-spacing:.2px}
    header p{margin:0;color:var(--muted)}
    .topmeta{display:flex;flex-direction:column}
    .themeToggle{appearance:none;border:1px solid var(--outline);background:linear-gradient(135deg,var(--accent),var(--accent2));color:white;padding:8px 10px;border-radius:999px;cursor:pointer;line-height:1}
    .themeToggle span{display:inline-block;font-size:18px;vertical-align:middle}
    main{max-width:1160px;margin:0 auto;padding:12px 20px 40px;display:grid;grid-template-columns:1.1fr .9fr;gap:20px}
    @media (max-width:920px){ main{grid-template-columns:1fr;}}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.01));border:1px solid var(--outline);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px}
    .card h2{margin:4px 0 14px;font-size:18px}
    .row{display:flex;gap:var(--gap);align-items:center;flex-wrap:wrap}
    .toolbar{margin-bottom:var(--gap)}
    .grid{display:grid;gap:var(--gap);grid-template-columns:repeat(2,minmax(180px,1fr))}
    @media (max-width:720px){.grid{grid-template-columns:1fr}}
    label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
    select{width:100%;padding:11px 12px;background:var(--card);color:var(--text);border:1px solid var(--outline);border-radius:10px}
    .output{margin-top:12px;font-family:ui-monospace,Menlo,Consolas,monospace;background:var(--codeBg);color:var(--codeText);border:1px solid var(--outline);border-radius:12px;padding:16px;min-height:64px;white-space:pre-wrap}
    .btn{appearance:none;border:1px solid var(--outline);background:linear-gradient(180deg, var(--card), color-mix(in oklab, var(--card) 80%, black));color:var(--text);padding:10px 16px;border-radius:999px;font-weight:700;cursor:pointer}
    .btn.primary{border:none;background:linear-gradient(135deg,var(--accent),var(--accent2));color:#081020}
    .btn.ghost{background:transparent}
    .btn:disabled{opacity:.55;cursor:not-allowed}
    .pill{background:var(--card);border:1px solid var(--outline);border-radius:999px;padding:8px 10px;color:var(--muted);font-size:12px}
    footer{max-width:1160px;margin:0 auto 40px;padding:0 20px;color:var(--muted);font-size:12px}
    .divider{height:1px;background:var(--outline);margin:12px 0}

    /* ===== Values panel readability ===== */
    .param{margin:10px 0 14px}
    .param summary{cursor:pointer;user-select:none;font-size:14px;color:var(--text);padding:8px 10px;border-radius:10px;border:1px solid var(--outline);background:var(--card)}
    .param[open] summary{border-color:var(--accent)}
    .chips{display:grid;grid-template-columns:repeat(2,minmax(160px,1fr));gap:10px;margin-top:10px}
    @media (max-width:720px){.chips{grid-template-columns:1fr}}
    .chip{display:flex;flex-direction:column;gap:6px;background:var(--card);border:1px dashed var(--outline);border-radius:12px;padding:10px 12px;cursor:pointer;user-select:none;transition:transform .05s ease,border-color .2s ease}
    .chip:hover{border-color:var(--accent)}
    .chip:active{transform:scale(.99)}
    .chip .label{font-size:13px}
    .chip .code{font-family:ui-monospace,Menlo,Consolas,monospace;font-size:12px;color:var(--muted)}
    .chip:focus-visible{outline:var(--focus);outline-offset:2px}

    /* ===== Toast (copy) ===== */
    .toast{position:fixed;left:24px;bottom:24px;background:var(--card);border:1px solid var(--outline);color:var(--text);padding:10px 14px;border-radius:12px;opacity:0;transform:translateY(8px) scale(.98);animation:toast 1.2s ease forwards}
    @keyframes toast{0%{opacity:0;transform:translateY(8px) scale(.98)} 15%{opacity:1;transform:translateY(0) scale(1)} 85%{opacity:1} 100%{opacity:0;transform:translateY(8px) scale(.98)}}

    /* Reduce-motion respect */
    @media (prefers-reduced-motion: reduce){
      *{transition:none !important}
      .toast{animation:none;opacity:1}
    }

    /* ===== Recents ===== */
    .recents{margin-top:12px}
    .recents h3{margin:0 0 8px;font-size:13px;color:var(--muted)}
    .recent-list{display:flex;flex-wrap:wrap;gap:8px}
    .recent-pill{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--outline);background:var(--card);border-radius:999px;padding:6px 10px;font-family:ui-monospace,Menlo,Consolas,monospace;font-size:12px}
    .recent-pill button{border:none;background:transparent;cursor:pointer;color:var(--muted)}

    /* ===== Focus states ===== */
    :where(button, [role="button"], select, summary):focus-visible{outline:var(--focus);outline-offset:2px}
    select.missing {
      border-color: #e74c3c !important; /* red border */
      box-shadow: 0 0 0 2px rgba(231, 76, 60, 0.3);
    }
    
      /* Utility */
    .muted{color: var(--muted)}
  </style>
</head>
<body>
  <a class="skip" href="#main">Skip to main content</a>
  <header>
    <div class="topmeta">
      <h1>Asset Name Generator</h1>
      <p>Build consistent asset names from a documented naming convention.</p>
    </div>
    <button id="themeBtn" class="themeToggle" type="button" aria-label="Toggle theme" title="Toggle theme"><span id="themeIcon">🌙</span></button>
  </header>

  <main id="main">
    <!-- Left: Generator -->
    <section class="card" id="genPanel" aria-labelledby="genHeading">
      <h2 id="genHeading">Generator</h2>
      <div class="divider" role="presentation"></div>
      <div class="row toolbar" style="justify-content:space-between">
        <span class="pill" aria-live="polite" id="reqNote">All fields required</span>
        <div class="row" style="gap:8px">
          <button id="resetBtn" class="btn" type="button">Clear</button>
        </div>
      </div>
      <div class="grid" id="fields"></div>

      <div class="output" id="output" aria-live="polite" aria-atomic="true" role="status">Select values to generate…</div>
      <div class="row" style="margin-top:8px; gap:10px">
        <button id="copyBtn" class="btn primary" type="button" disabled aria-describedby="validity">Copy</button>
        <span class="pill" id="validity" aria-live="polite">Incomplete</span>
      </div>

      <!-- Recent names memory -->
      <section class="recents" id="recents" aria-label="Recent names"></section>
    </section>

    <!-- Right: Convention / Values -->
    <section class="card" aria-labelledby="valuesHeading">
      <h2 id="valuesHeading">Naming Convention</h2>
      <div class="row toolbar" style="justify-content:space-between">
        <div>
          <label>Current source</label>
         <div class="pill" id="sourcePill">Embedded JSON</div>
        </div>
      </div>

      <div id="valuesList" style="margin-top:10px"></div>
    </section>
  </main>

  <footer>© <span id="year"></span> Digital Marketing Ops</footer>

  <noscript>
    <div style="max-width:1160px;margin:16px auto;padding:12px 20px">
      This tool requires JavaScript enabled to generate names and copy values.
    </div>
  </noscript>

  <script>
    // === Schema (embedded) — edit this object when you need to update ===
    const FALLBACK_SCHEMA = {
      order:["Campaign category","Campaign Name","Persona","Landing Page Type","LP Content Name","Creative Name","Campaign Content","Asset Format","Asset SubType","Language"],
      delimiter:"_", case:"lower",
      fields:{
        "Campaign category":[{label:"Brand",code:"brand"},{label:"Main",code:"main"},{label:"Product",code:"product"}],
        "Campaign Name":[{label:"Make It",code:"makeit"},{label:"Gaby",code:"gaby"},{label:"SMB",code:"smb"},{label:"Rapid AI",code:"rapidai"},{label:"PFC",code:"pfc"},{label:"PFC edgy",code:"pfcedgy"},{label:"Toolkits",code:"toolkits"}],
        "Persona":[{label:"Full-Stack Marketer",code:"fsm"},{label:"SEO",code:"seo"},{label:"FSM-SEO",code:"fsm-seo"},{label:"SMB-FSM",code:"smb-fsm"},{label:"SMB",code:"smb"},{label:"All-psn",code:"all-psn"}],
        "Landing Page Type":[{label:"Blogpost",code:"bp"},{label:"LP",code:"lp"},{label:"SS",code:"ss"},{label:"Webinar",code:"web"},{label:"Event",code:"evt"},{label:"WP",code:"wp"},{label:"Academy",code:"acd"},{label:"Ebook",code:"ebook"},{label:"Case Study",code:"cs"}],
        "LP Content Name":[{label:"solution-all-in-one",code:"solution-all-in-one"},{label:"product-seo-challenges",code:"product-seo-challenges"},{label:"traffic-analytics-7-new",code:"traffic-analytics-7-new"},{label:"product-content-marketing",code:"product-content-marketing"},{label:"product-free-trial",code:"product-free-trial"},{label:"product-instant-market-insights-1",code:"product-instant-market-insights-1"},{label:"product-all-in-one-local-marketing-solution-new",code:"product-all-in-one-local-marketing-solution-new"},{label:"product-keyword-magic-tool-7",code:"product-keyword-magic-tool-7"},{label:"product-semrush-plans-comparison",code:"product-semrush-plans-comparison"},{label:"creating-reports-with-semrush-report-builder",code:"creating-reports-with-semrush-report-builder"},{label:"advanced-google-ads-tips-skyrocket-your-profit",code:"advanced-google-ads-tips-skyrocket-your-profit"}],
        "Creative Name":[{label:"Competitor Research",code:"competitorresearch"},{label:"Fix Site SEO",code:"fixsiteseo"},{label:"JBTD Discover Winning Keywords",code:"JTBD Discover Winning Keywords"},{label:"All SEO One Tab",code:"allseoonetab"},{label:"Want to Know",code:"wanttoknow"},{label:"SEO Checklist",code:"seochecklist"},{label:"Discover Exact Keywords",code:"discoverexactkeywords"},{label:"Fix Technical SEO",code:"fixtechnicalseo"},{label:"Algorithm Changed",code:"algorithmchanged"},{label:"Competitors Know Your Strategy",code:"competitorsknowyourstrategy"},{label:"12 Tabs Open",code:"12tabsopen"},{label:"Search Moves",code:"searchmoves"},{label:"404 Problems",code:"404problems"},{label:"Hero Corner Shop",code:"herocornershop"},{label:"sssmileworks",code:"sssmileworks"},{label:"Hero Fancy Limousines",code:"herofancylimousines"},{label:"sssmokies",code:"sssmokies"},{label:"JTBD Freetrial",code:"jtbdfreetrial"},{label:"JTBD Rankin Year",code:"jtbdrankinyear"},{label:"Not to Cry",code:"nottocry"},{label:"Too Many Things",code:"toomanythings"},{label:"Create Content for People",code:"createcontentforpeople"},{label:"JTBD Free Trial Recolored",code:"jtbdfreetrialrecolored"},{label:"Your Agency",code:"youragency"},{label:"Explorer",code:"explorer"},{label:"Hero Corporate Ladder",code:"herocorporateladder"},{label:"New to SEO",code:"newtoseo"},{label:"Improve SEO Performance",code:"improveseoperformance"},{label:"Starting SEO Journey",code:"startingseojourney"},{label:"Make Business nr1",code:"makebusinessnr1"},{label:"succeedonline",code:"Succeed Online"},{label:"Comicsilentrating",code:"comicsilentrating"},{label:"Better SEO",code:"betterseo"},{label:"HJTBD Improve Blogpost",code:"hjtbdimproveblogpost"},{label:"Rank Higher Content",code:"rankhighercontent"},{label:"Content in One",code:"contentinone"},{label:"Create SEO Friendly Content in One Place",code:"createseofriendlycontentinoneplace"},{label:"Simlpifysocialmedia",code:"simlpifysocialmedia"},{label:"Checklist",code:"checklist"},{label:"Fix issues new",code:"fixissuesnew"},{label:"UGC Rank High",code:"ugcrankhigh"},{label:"Grow Business",code:"growbusiness"},{label:"Investigate Competitors",code:"investigatecompetitors"},{label:"HJTBDfindpopularproducts",code:"hjtbdfindpopularproducts"},{label:"alltoolsinone",code:"alltoolsinone"},{label:"UGCdrivetraffic",code:"ugcdrivetraffic"},{label:"comicdontdothis",code:"comicdontdothis"},{label:"reportresults",code:"reportresults"},{label:"quotehighintent",code:"quotehighintent"},{label:"404highintent",code:"404highintent"},{label:"stuckhighintent",code:"stuckhighintent"},{label:"everythingyouneed",code:"everythingyouneed"},{label:"SEOChallengesYTComponent",code:"seochallengesytcomponent"},{label:"SEOChallengesOptimizedCreatives",code:"seochallengesoptimizedcreatives"},{label:"competitorsspikedhighintent",code:"competitorsspikedhighintent"},{label:"competitorsoutpacinghighintent",code:"competitorsoutpacinghighintent"},{label:"analyzerival",code:"analyzerival"},{label:"analyzecompetitor",code:"analyzecompetitor"},{label:"CompetitiveResearchYTComponent",code:"competitiveresearchytcomponent"},{label:"grabaudiencesattention",code:"grabaudiencesattention"},{label:"SEOWritingAssistant5YTComponent",code:"seowritingassistant5ytcomponent"},{label:"Swamped",code:"swamped"},{label:"whichtask",code:"whichtask"},{label:"EasySolutionsOptimizedCreatives",code:"easysolutionsoptimizedcreatives"},{label:"digitalinsighttrends",code:"digitalinsighttrends"},{label:"trafficinsights",code:"trafficinsights"},{label:"sslibereatnew",code:"sslibereatnew"},{label:"revampmarketingstrategynew",code:"revampmarketingstrategynew"},{label:"ssmorningside",code:"ssmorningside"},{label:"jtbdAImagic",code:"jtbdaimagic"},{label:"findkeywords",code:"findkeywords"},{label:"ugc3reasons",code:"ugc3reasons"},{label:"UGCgrowagency",code:"ugcgrowagency"},{label:"sslibereatagency",code:"sslibereatagency"},{label:"pitchprospects",code:"pitchprospects"},{label:"ssuhs",code:"ssuhs"},{label:"whitelabelandautomatedreporting",code:"whitelabelandautomatedreporting"},{label:"driveROIwiththerightkeywords",code:"driveroiwiththerightkeywords"},{label:"tbc",code:"tbc"},{label:"ugcdailydatajen",code:"ugcdailydatajen"},{label:"rankhigh",code:"rankhigh"},{label:"getlocalcustomers",code:"getlocalcustomers"},{label:"keywordresearch",code:"keywordresearch"},{label:"dissect",code:"dissect"},{label:"boostproductivity",code:"boostproductivity"},{label:"jusrregistered",code:"jusrregistered"},{label:"inc",code:"inc"}],
        "Campaign Content":[{label:"SEO Toolkit",code:"seotoolkit"},{label:"Advertising Toolkit",code:"advertisingtoolkit"},{label:"Traffic Toolkit",code:"traffictoolkit"},{label:"Content Toolkit",code:"contenttoolkit"},{label:"Social Toolkit",code:"socialtoolkit"},{label:"Local Toolkit",code:"localtoolkit"},{label:"AI Toolkit",code:"aitoolkit"},{label:"PR Toolkit",code:"prtoolkit"},{label:"All-in-One-Toolkit",code:"allinonetoolkit"},{label:"Enterprise",code:"enterprise"}],
        "Asset Format":[{label:"HTML 5 Banner",code:"bnr-html5"},{label:"Animated Banner",code:"bnr-anim"},{label:"Carousel",code:"carousel"},{label:"Dynamic Remarketing",code:"dynrem"},{label:"In Mail",code:"inmail"},{label:"Image",code:"image"},{label:"Video 10s",code:"video10s"},{label:"Video 15s",code:"video15s"},{label:"Video 30s",code:"video30s"},{label:"Video over 30s",code:"videoover30s"}],
        "Asset SubType":[{label:"AIJTBD",code:"aijtbd"},{label:"AnimatedJTBD",code:"animatedjtbd"},{label:"ShootJTBD",code:"shootjtbd"},{label:"AIUGC",code:"aiugc"},{label:"ShootVSC",code:"shootvsc"},{label:"Human",code:"human"},{label:"Human+UI",code:"humanui"},{label:"UI",code:"ui"},{label:"Quote",code:"quote"},{label:"ShootSS",code:"shootss"},{label:"Checklist",code:"checklist"},{label:"ProductWalkthrough",code:"productwalkthrough"}],
        "Language":[{label:"English",code:"en"},{label:"Spanish",code:"es"}]
      }
    };

    let NAMING_SCHEMA = FALLBACK_SCHEMA;
    const state = {};

    const fieldsEl = document.getElementById('fields');
    const outputEl = document.getElementById('output');
    const copyBtn = document.getElementById('copyBtn');
    const copyNewBtn = document.getElementById('copyNewBtn');
    const validity = document.getElementById('validity');
    const recentsEl = document.getElementById('recents');

    // === Recents memory ===
    const RECENTS_KEY = 'recentNames';
    function getRecents(){
      try{ return JSON.parse(localStorage.getItem(RECENTS_KEY)||'[]'); }catch(_){ return []; }
    }
    function setRecents(list){ localStorage.setItem(RECENTS_KEY, JSON.stringify(list.slice(0,5))); }
    function addRecent(name){
      const cur = getRecents();
      const next = [name, ...cur.filter(n=>n!==name)].slice(0,5);
      setRecents(next); renderRecents();
    }
    function clearRecents(){ setRecents([]); renderRecents(); }
    function renderRecents(){
      const items = getRecents();
      if(!items.length){ recentsEl.innerHTML=''; return; }
      recentsEl.innerHTML = `
        <h3>Recent names</h3>
        <div class="recent-list">
          ${items.map((n,i)=>`<span class="recent-pill" data-recent="${i}"><span>${n}</span><button type="button" title="Copy" aria-label="Copy recent ${i+1}">⧉</button></span>`).join('')}
          <button class="btn ghost" id="clearRecentsBtn" type="button" title="Clear recent names">Clear</button>
        </div>`;
    }

    function renderValuesList(){
      const box = document.getElementById('valuesList');
      box.innerHTML = NAMING_SCHEMA.order.map(label=>{
        const chips = (NAMING_SCHEMA.fields[label]||[]).map(v=>
          `<div class="chip" role="button" tabindex="0" aria-label="Copy \"${v.code}\"" data-copy="${v.code}"><div class="label">${v.label}</div><div class="code">${v.code}</div></div>`
        ).join('');
        return `<details class="param"><summary>${label}</summary><div class="chips">${chips||'<em class="muted">No values</em>'}</div></details>`;
      }).join('');
    }

    function renderFields(){
      fieldsEl.innerHTML='';
      NAMING_SCHEMA.order.forEach(label=>{
        const opts = NAMING_SCHEMA.fields[label]||[];
        const wrap=document.createElement('div');
        const id = 'fld_'+label.replace(/\s+/g,'_').toLowerCase();
        wrap.innerHTML=`
          <label for="${id}">${label}</label>
          <select id="${id}" data-label="${label}">
            <option value="" disabled selected></option>
            ${opts.map(v=>`<option value="${v.code}">${v.label}</option>`).join('')}
          </select>`;
        fieldsEl.appendChild(wrap);
        state[label]='';
      });
    }

    const toCase=(s,mode)=> mode==='lower'? s.toLowerCase(): s;

    function compose(){
      const parts = NAMING_SCHEMA.order.map(l=>state[l]).filter(Boolean);
      const complete = parts.length===NAMING_SCHEMA.order.length;
      const out = toCase(parts.join(NAMING_SCHEMA.delimiter), NAMING_SCHEMA.case);
      outputEl.textContent = out || 'Select values to generate…';
      copyBtn.disabled = !complete;
      if (copyNewBtn) copyNewBtn.disabled = !complete;
      copyBtn.textContent = complete ? 'Copy' : 'Select All Values';
      validity.textContent = complete ? 'Ready to copy' : 'Incomplete';
      return { out, complete };
    }

    function toast(msg){
      const t=document.createElement('div');
      t.className='toast';
      t.setAttribute('role','status');
      t.setAttribute('aria-live','polite');
      t.textContent=msg;
      document.body.appendChild(t);
      setTimeout(()=>t.remove(), 1200);
    }

    function resetAll(){
      document.querySelectorAll('select').forEach(s=>{s.selectedIndex=0;s.classList.remove('missing');});
      NAMING_SCHEMA.order.forEach(l=>state[l]='');
      compose();
    }

    function highlightMissingFields(){
      NAMING_SCHEMA.order.forEach(label=>{
        const sel=document.querySelector(`select[data-label="${label}"]`);
        if(!state[label]) sel.classList.add('missing');
      });
    }
    
    function attach(){
      NAMING_SCHEMA.order.forEach(label=>{
        const sel=document.querySelector(`select[data-label="${label}"]`);
        sel.addEventListener('change', e=>{
          state[label]=e.target.value;
          sel.classList.remove('missing');
          compose();
        });
      });
      document.getElementById('resetBtn').addEventListener('click', resetAll);

      async function doCopy(andReset=false){
        const { out, complete } = compose();
        if (!complete) return;
        try{
          await navigator.clipboard.writeText(out);
          toast('Copied to clipboard');
          addRecent(out);
          if(andReset) resetAll();
        }catch(err){
          // Fallback: create a temporary textarea
          const ta=document.createElement('textarea');
          ta.value=out; document.body.appendChild(ta); ta.select();
          const ok=document.execCommand('copy');
          document.body.removeChild(ta);
          if(ok){ toast('Copied'); addRecent(out); if(andReset) resetAll(); }
          else{ toast('Copy failed'); }
        }
      }

      copyBtn.addEventListener('click', ()=>{
        const { complete } = compose();
        if (!complete) {
          highlightMissingFields();
          return;
        }
        doCopy(false);
      });
      if (copyNewBtn) copyNewBtn.addEventListener('click', ()=>{
        const { complete } = compose();
        if (!complete) {
          highlightMissingFields();
          return;
        }
        doCopy(true);
      });

      // === Chips: copy on click ===
      const valuesList = document.getElementById('valuesList');
      valuesList.addEventListener('click', async (e)=>{
        const chip = e.target.closest('.chip');
        if(!chip) return;
        const text = chip.getAttribute('data-copy') || chip.querySelector('.code')?.textContent || '';
        if(!text) return;
        try{ await navigator.clipboard.writeText(text); toast(`Copied: ${text}`); }
        catch(_){ toast('Copy failed'); }
      });
      valuesList.addEventListener('keydown', async (e)=>{
        if(e.key!=='Enter' && e.key!==' '){ return; }
        const chip = e.target.closest('.chip');
        if(!chip) return;
        e.preventDefault();
        const text = chip.getAttribute('data-copy') || chip.querySelector('.code')?.textContent || '';
        if(!text) return;
        try{ await navigator.clipboard.writeText(text); toast(`Copied: ${text}`); }
        catch(_){ toast('Copy failed'); }
      });

      // === Recents: copy / clear via delegation ===
      recentsEl.addEventListener('click', async (e)=>{
        const btn = e.target.closest('button');
        if(!btn) return;
        if(btn.id==='clearRecentsBtn'){ clearRecents(); return; }
        const pill = e.target.closest('.recent-pill');
        if(!pill) return;
        const idx = +pill.getAttribute('data-recent');
        const items = getRecents();
        const text = items[idx];
        if(!text) return;
        try{ await navigator.clipboard.writeText(text); toast(`Copied: ${text}`); }
        catch(_){ toast('Copy failed'); }
      });

      // === Theme toggle (icon) ===
      const themeBtn=document.getElementById('themeBtn');
      const themeIcon=document.getElementById('themeIcon');
      const root=document.documentElement;
      const saved=localStorage.getItem('theme')||'dark';
      root.setAttribute('data-theme', saved);
      themeIcon.textContent = saved==='dark' ? '🌙' : '☀️';
      themeBtn.addEventListener('click', ()=>{
        const cur=root.getAttribute('data-theme');
        const next=cur==='dark'?'light':'dark';
        root.setAttribute('data-theme', next);
        localStorage.setItem('theme', next);
        themeIcon.textContent = next==='dark' ? '🌙' : '☀️';
      });
    }

    async function loadSchema() {
  const sourcePill = document.getElementById('sourcePill');
  try {
    const r = await fetch('schema.json', { cache: 'no-store' });
    if (!r.ok) throw new Error('Missing schema.json');
    const remote = await r.json();
    if (!remote || !remote.order || !remote.fields) throw new Error('Bad schema format');
    NAMING_SCHEMA = remote;
    if (sourcePill) sourcePill.textContent = 'Remote JSON';
  } catch (err) {
    NAMING_SCHEMA = FALLBACK_SCHEMA;
    if (sourcePill) sourcePill.textContent = 'Embedded JSON';
    console.warn('Using embedded schema:', err?.message || err);
  }
}

(async function init(){
  await loadSchema();
  renderFields(); attach(); compose(); renderValuesList(); renderRecents();
  document.getElementById('year').textContent = new Date().getFullYear();
})();
  </script>
</body>
</html>
